*** Begin Patch
*** Add File: core/src/test/java/org/neo4j/ogm/metadata/GeneratedTests.java
+/*
+ * Copyright (c) 2002-2020 "Neo4j,"
+ * Neo4j Sweden AB [http://neo4j.com]
+ *
+ * This file is part of Neo4j.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.neo4j.ogm.metadata;
+
+import org.junit.Test;
+import org.neo4j.ogm.driver.TypeSystem;
+
+import java.lang.reflect.Field;
+import java.util.Map;
+
+import static org.junit.Assert.assertNull;
+
+/**
+ * Generated performance test to demonstrate the improvement introduced by caching
+ * simple-name lookups inside DomainInfo.getClassInfo.
+ *
+ * The test fills DomainInfo's internal classNameToClassInfo map with many entries
+ * and repeatedly requests a non-existing simple class name. The original
+ * implementation scans the whole key set with a regex each time; the patched
+ * implementation caches the negative lookup result, making subsequent lookups
+ * much faster. The test does not assert timings â€” instead it produces a
+ * measurable elapsed time in Maven's test output to compare both versions.
+ */
+public class GeneratedTests {
+
+    @Test
+    public void performanceMissingSimpleName() throws Exception {
+        final int NUM_KEYS = 2000;
+        final int NUM_ITER = 3000;
+
+        DomainInfo domainInfo = new DomainInfo(TypeSystem.NoNativeTypes.INSTANCE);
+
+        // Inject many fake entries into the private classNameToClassInfo map
+        Field mapField = DomainInfo.class.getDeclaredField("classNameToClassInfo");
+        mapField.setAccessible(true);
+        @SuppressWarnings("unchecked")
+        Map<String, ClassInfo> infos = (Map<String, ClassInfo>) mapField.get(domainInfo);
+
+        // Populate map with many entries. Reuse the same ClassInfo instance is fine for this benchmark.
+        ClassInfo sample = new ClassInfo(String.class, TypeSystem.NoNativeTypes.INSTANCE);
+        for (int i = 0; i < NUM_KEYS; i++) {
+            infos.put("com.example.FakeClass" + i, sample);
+        }
+
+        // A simple name that does not exist in the keys -> triggers the slow path
+        final String missingSimpleName = "NonExistingSimpleClassName";
+
+        // First call: potentially slow. Validate behaviour is as expected (null result)
+        assertNull(domainInfo.getClassSimpleName(missingSimpleName));
+
+        // Now perform many repeated lookups to amplify the difference between
+        // the cached and non-cached implementations.
+        for (int i = 0; i < NUM_ITER; i++) {
+            assertNull(domainInfo.getClassSimpleName(missingSimpleName));
+        }
+
+        // Keep reference to infos to avoid GC-related noise
+        assert infos.size() == NUM_KEYS;
+    }
+}
+
*** End Patch
